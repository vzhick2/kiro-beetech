@import 'tailwindcss';

@layer base {
  body {
    background-color: #f8fafc;
    color: #1f2937;
    font-family:
      -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu,
      Cantarell, sans-serif;
    overflow: hidden; /* Prevent body scroll - scrollbar will be in content area only */
    /* Simple responsive base font - good for inventory data readability */
    font-size: clamp(14px, 1.1vw, 16px);
    line-height: 1.5;
    /* 2025 Mobile UX: Prevent zoom on input focus */
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
  }

  /* Prevent zoom on all input elements across the entire app */
  input,
  textarea,
  select {
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    font-size: 16px; /* Prevents iOS zoom on focus */
  }

  /* Prevent zoom on all interactive elements */
  button,
  a,
  [role='button'] {
    -webkit-tap-highlight-color: transparent;
  }

  /* Headers for inventory sections - subtle scaling */
  h1,
  h2,
  h3 {
    font-size: clamp(1.25rem, 2vw, 1.75rem);
    font-weight: 600;
    line-height: 1.3;
  }
}

/* Search overlay animation */
@keyframes slideInFromTop {
  from {
    transform: translateY(-100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Comprehensive button flash prevention */
@layer components {
  .no-flash {
    /* Remove onclick Background Color Change */
    -webkit-tap-highlight-color: transparent;
    /* 2025 Mobile UX: Better touch targets */
    min-height: 44px;
    min-width: 44px;
  }

  .no-flash:focus {
    /* Remove onclick Border Color Change */
    outline: none !important;
  }

  .no-flash:active {
    outline: none !important;
  }

  .no-flash::-moz-focus-inner {
    border: 0;
  }
}

/* Global focus outline prevention for sidebar links */
@layer utilities {
  /* Prevent all focus outlines on sidebar navigation */
  a[href]:focus,
  a[href]:active,
  a[href]:focus-visible {
    outline: none !important;
    box-shadow: none !important;
    -webkit-tap-highlight-color: transparent !important;
  }

  /* Prevent WebKit tap highlighting */
  * {
    -webkit-tap-highlight-color: transparent;
  }

  /* Remove focus rings from all interactive elements in sidebar */
  nav a:focus,
  nav a:active,
  nav a:focus-visible,
  nav button:focus,
  nav button:active,
  nav button:focus-visible {
    outline: none !important;
    box-shadow: none !important;
  }
}

/* Layout structure for proper scrollbar positioning */
.app-container {
  height: 100vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  /* 2025 Mobile UX: Prevent overscroll bounce on iOS */
  overscroll-behavior: none;
  -webkit-overflow-scrolling: touch;
}

.main-layout {
  flex: 1;
  display: flex;
  overflow: hidden;
}

.content-area {
  flex: 1;
  overflow-y: auto; /* Scrollbar appears here - below header, right of sidebar */
  overflow-x: hidden;
  min-width: 0; /* Allow shrinking below content size */
  box-sizing: border-box;
  /* 2025 Mobile UX: Smooth scrolling and prevent horizontal scroll */
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-y: contain;
  /* Prevent zoom on content */
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  /* CRITICAL: Allow dynamic width adjustment - remove fixed constraints */
  width: auto;
  max-width: none;
  /* Ensure proper positioning for mobile sidebar interaction */
  position: relative;
}

/* Custom Scrollbar Styling - Dark Theme, Wider for Better Usability */
::-webkit-scrollbar {
  width: 8px; /* Wider scrollbar for easier grabbing (was 6px) */
}

::-webkit-scrollbar-track {
  background: transparent; /* Transparent track */
}

::-webkit-scrollbar-thumb {
  background: #374151; /* Dark gray thumb */
  border-radius: 4px; /* Slightly larger radius to match width */
  transition: background-color 0.2s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: #4b5563; /* Slightly lighter on hover */
}

::-webkit-scrollbar-thumb:active {
  background: #6b7280; /* Lighter when active */
}

/* Firefox scrollbar styling - dark theme */
* {
  scrollbar-width: auto; /* Changed from 'thin' to 'auto' for wider scrollbar */
  scrollbar-color: #374151 transparent;
}

/* Enhanced viewport control for tables and complex layouts */
table,
.table-container {
  /* Allow proper responsive behavior */
  width: 100%;
  max-width: 100%;
  table-layout: auto;
  /* Prevent zoom on table content */
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
}

/* Responsive table container */
.overflow-x-auto {
  /* Allow horizontal scroll only when needed but prevent zoom issues */
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  /* Prevent zoom while allowing necessary scroll */
  touch-action: pan-x pan-y;
  /* Ensure proper width constraints */
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* Table cells responsive behavior */
table th,
table td {
  /* Allow table cells to shrink responsively */
  min-width: 0;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* Prevent zoom on all interactive elements in tables */
table button,
table input,
table select,
table a {
  -webkit-tap-highlight-color: transparent;
  font-size: 16px; /* Prevents iOS zoom on focus */
}

/* Ensure consistent viewport behavior across all pages */
.page-container {
  /* Allow proper responsive behavior */
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  /* Prevent zoom on page content */
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
}

/* Enhanced zoom prevention for navigation elements */
header,
nav,
.sidebar,
.navbar,
.fixed {
  /* Make navigation elements immune to zoom and sticky */
  position: fixed !important;
  -webkit-text-size-adjust: none;
  -ms-text-size-adjust: none;
  text-size-adjust: none;
  touch-action: manipulation;
  /* Prevent touch zoom gestures */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Force hardware acceleration for smooth fixed positioning */
  transform: translateZ(0);
  backface-visibility: hidden;
  will-change: transform;
  /* Ensure proper width constraints */
  width: 100%;
  max-width: 100vw;
  box-sizing: border-box;
}

/* Header content container */
header > div {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  overflow: hidden; /* Prevent content overflow */
}

/* Prevent zoom on overflow containers */
.overflow-x-auto,
.overflow-auto {
  touch-action: pan-x pan-y;
  -webkit-overflow-scrolling: touch;
  /* Prevent zoom in scrollable areas */
}

/* Force zoom restrictions on all touch targets */
* {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

/* Enhanced touch handling for navigation elements - Android specific improvements */
nav *,
.sidebar *,
[role="navigation"] * {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  -webkit-user-select: none;
  user-select: none;
  /* Android-specific touch improvements */
  -webkit-touch-callout: none;
  -webkit-user-drag: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  /* Prevent text selection that can interfere with touch */
  -webkit-touch-action: manipulation;
  touch-action: manipulation;
  /* Ensure proper touch target sizing */
  min-height: 44px;
  min-width: 44px;
}

/* Specific fixes for mobile browsers that ignore user-scalable=no */
@media screen and (max-width: 768px) {
  html {
    /* Double-ensure no zoom on mobile */
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    text-size-adjust: 100%;
    touch-action: manipulation;
    overflow-x: hidden;
    /* Prevent all zoom gestures */
    -webkit-user-zoom: normal;
    -moz-user-zoom: normal;
    user-zoom: normal;
  }

  body {
    /* Prevent horizontal scroll that can trigger zoom */
    overflow-x: hidden;
    touch-action: manipulation;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
    /* Prevent zoom on body */
    -webkit-text-size-adjust: none;
    -ms-text-size-adjust: none;
    text-size-adjust: none;
  }

  /* Make navigation absolutely immune to zoom */
  header[class*='fixed'],
  .fixed {
    transform: translateZ(0); /* Force hardware acceleration */
    backface-visibility: hidden;
    will-change: transform;
    position: fixed !important;
    z-index: 9999;
  }

  /* Force minimum font sizes to prevent iOS zoom on small text */
  * {
    -webkit-text-size-adjust: none !important;
    -ms-text-size-adjust: none !important;
    text-size-adjust: none !important;
    /* Prevent zoom on tap */
    -webkit-tap-highlight-color: transparent !important;
    /* Prevent selection that can trigger zoom */
    -webkit-user-select: none !important;
    -moz-user-select: none !important;
    user-select: none !important;
    /* Prevent zoom gestures */
    touch-action: manipulation !important;
  }

  /* Specific table and form element zoom prevention */
  table,
  th,
  td,
  input,
  select,
  textarea,
  button {
    font-size: 16px !important; /* iOS prevents zoom on 16px+ elements */
    -webkit-text-size-adjust: none !important;
    -ms-text-size-adjust: none !important;
    text-size-adjust: none !important;
    touch-action: manipulation !important;
  }

  /* Force specific behavior on table containers */
  .table-container,
  .overflow-x-auto {
    /* Prevent zoom in scrollable table areas */
    touch-action: pan-x pan-y !important;
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
    max-width: 100vw;
    box-sizing: border-box;
  }

  /* Prevent zoom on any interactive elements in tables */
  table button,
  table input,
  table select,
  table textarea,
  table a,
  [role='gridcell'] button,
  [role='gridcell'] input {
    font-size: 16px !important;
    -webkit-text-size-adjust: none !important;
    touch-action: manipulation !important;
    -webkit-tap-highlight-color: transparent !important;
  }
}